<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:pretty="http://ocpsoft.com/prettyfaces"
	xmlns:h="http://java.sun.com/jsf/html">
<h:head>

</h:head>

<h:body>
	<ui:composition template="/template/espaceClient.xhtml">
		<ui:define name="titre">Dashbord client</ui:define>

		<ui:define name="contenu">
			<div class="panel-body">
				<div class="tab-content">

					<div id="tBord" class="tab-pane active">
						<section class="panel">
							<header class="panel-heading">
								<h4 style="text-align: center;">Vos Campagnes</h4>
							</header>
							<hr />
							<table class="table">
								<thead>
									<tr>
										<th>Campagne</th>
										<th>Date de début</th>
										<th>Date de fin</th>
										<th>Nombre de vues</th>
										<th></th>
									</tr>
								</thead>
								<tbody>
									<ui:repeat var="camp" value="#{clientBean.camps}">
										<tr>
											<td>#{camp.intitule}</td>
											<td><h:outputText value="#{camp.dateDebut}">
													<f:convertDateTime type="date" pattern="dd-MM-yyyy" />
												</h:outputText></td>
											<td><h:outputText value="#{camp.dateFin}">
													<f:convertDateTime type="date" pattern="dd-MM-yyyy" />
												</h:outputText></td>
											<td>#{camp.nombreDeVues()}</td>
											<td> <h:commandButton styleClass="btn btn-success btn-xs" value="Détail" 
										   /></td>

										</tr>
									</ui:repeat>
								</tbody>
							</table>
						</section>
					</div>

					<div id="camp" class="tab-pane">
						<section class="panel">
							<header class="panel-heading">
								<h4 style="text-align: center;">Vos Campagnes</h4>
							</header>
							<hr />
							<table class="table">
								<thead>
									<tr>
										<th>Intitulé de la campagne</th>
										<th>Date de début</th>
										<th>Date de fin</th>
										<th>Nombre de vues</th>
										<th></th>
									</tr>
								</thead>
								<tbody>
									<ui:repeat var="camp" value="#{clientBean.camps}">
										<tr>
											<td>#{camp.intitule}</td>
											<td><h:outputText value="#{camp.dateDebut}">
													<f:convertDateTime type="date" pattern="dd-MM-yyyy" />
												</h:outputText></td>
											<td><h:outputText value="#{camp.dateFin}">
													<f:convertDateTime type="date" pattern="dd-MM-yyyy" />
												</h:outputText></td>
											<td>#{camp.nombreDeVues()}</td>
											<h:form>									
										<td style="text-align: center">
										   <h:commandButton styleClass="btn btn-success btn-xs" value="Publicités" 
										   action="#{clientBean.loadPubs(camp)}" />&#160; 
										   <pretty:link mappingId="detailfacture" styleClass="btn btn-primary  btn-xs" >
									               <f:param value="#{camp.id}" />
									               Factures
							            	</pretty:link> 
										  
										</td>
									</h:form>	
								
										</tr>
									</ui:repeat>
								</tbody>
							</table>
							
						</section>
					</div>

				</div>
			</div>
		</ui:define>
	</ui:composition>
</h:body>
</html>